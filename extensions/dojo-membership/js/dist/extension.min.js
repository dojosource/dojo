jQuery(function(o){o(".dojo-logged-out #dojo-signup").submit(function(e){e.preventDefault();var t={};o(this).find("input").each(function(){var e=o(this).attr("name"),i=o(this).val();t[e]=i}),o(".dojo-error").hide(),o(".dojo-submit-button").hide(),o(".dojo-please-wait").show(),o.post(dojo.ajax("membership","signup"),t,function(e){"success"!=e?(o(".dojo-error").html(e),o(".dojo-error").show(),o(".dojo-please-wait").hide(),o(".dojo-submit-button").show()):window.location.reload()})})}),jQuery(function(o){o("#dojo-login").submit(function(e){e.preventDefault();var t={};o(this).find("input").each(function(){var e=o(this).attr("name"),i=o(this).val();t[e]=i}),o(".dojo-error").hide(),o(".dojo-submit-button").hide(),o(".dojo-please-wait").show(),o.post(dojo.ajax("membership","login"),t,function(e){"success"!=e?(o(".dojo-error").html(e),o(".dojo-error").show(),o(".dojo-please-wait").hide(),o(".dojo-submit-button").show()):window.location.reload()})})}),jQuery(function(o){o(".dojo-user-billing .dojo-save-billing").click(function(){var e={};o(".dojo-billing-options input, .dojo-billing-options select").each(function(){"radio"==o(this).attr("type")?o(this).is(":checked")&&(e[o(this).attr("name")]=o(this).val()):e[o(this).attr("name")]=o(this).val()}),o.post(dojo.ajax("membership","save_billing_options"),e,function(e){"success"==e?window.location=dojo.param("membership_url"):(o(".dojo-billing-error .dojo-error").text(e),o(".dojo-billing-error").show())})})}),jQuery(function(o){o(".dojo-user-enroll-apply .submit-application").click(function(){var e=o(".terms-checkbox").not(":checked");e.length?(o(".error-message").text("Please indicate that you have read and agree with the terms and conditions for each membership that requires it."),o(".error-container").show()):(o(".error-container").hide(),o(".submit-application").hide(),o(".dojo-please-wait").show(),o("#post").submit())})}),jQuery(function($){function updateCheckout(doPost){var data={};doPost?$("#dojo-enroll select").each(function(){data[$(this).attr("name")]=$(this).val()}):data.refresh_only=!0,$.post(dojo.ajax("membership","save_enrollment"),data,function(response){var data=eval("("+response+")");dojoCheckout.setLineItems(data.line_items),0==data.line_items.length?($(".dojo-monthly-pricing").hide(),$(".dojo-registration-fee").hide()):($(".dojo-monthly-pricing").show(),$(".dojo-registration-fee").show());var reg_fee=parseInt(data.reg_fee)/100;$(".dojo-registration-amount").text("$"+reg_fee.toFixed(2))})}$(".dojo-user-enroll").length>0&&($("#dojo-enroll select").change(function(){updateCheckout(!0)}),$(".dojo-membership-details").click(function(){window.location=dojo.param("contract_url")+$(this).attr("data-id")}),updateCheckout(!1))}),jQuery(function(o){o(".dojo-user-membership .dojo-add-student").click(function(){window.location=dojo.param("students_edit_url")}),o(".dojo-user-membership .dojo-students .dojo-select-list-item").click(function(){var e=o(this).attr("data-id");window.location=dojo.param("students_edit_url")+"?student="+e}),o(".dojo-user-membership .dojo-enroll").click(function(){window.location=dojo.param("enroll_url")})}),jQuery(function(o){var e=new Date;o(".dojo-user-students-edit .dojo-membership-date").datepicker({changeMonth:!0,changeYear:!0,yearRange:"1930:"+e.getFullYear()}),o(".dojo-user-students-edit input[name=first_name]").change(function(){o("input[name=alias]").val(o(this).val())}),o(".dojo-user-students-edit .dojo-cancel-contract button").click(function(){o(".dojo-cancel-contract").hide(),o(".dojo-confirm-cancel").show()}),o(".dojo-user-students-edit .dojo-confirm-cancel a").click(function(){var e={membership_id:dojo.param("membership_id")};o.post(dojo.ajax("membership","cancel_membership"),e,function(e){"success"==e?window.location.reload():(o(".dojo-cancel-error").text(e),o(".dojo-cancel-error-container").show())})})}),jQuery(function(o){o(".dojo-user-students .dojo-add-student").click(function(){window.location=dojo.param("students_edit_url")}),o(".dojo-user-students .dojo-select-list-item").click(function(){var e=o(this).attr("data-id");window.location=dojo.param("students_edit_url")+"?student="+e}),o(".dojo-user-students .dojo-enroll").click(function(){window.location=dojo.param("enroll_url")})});